---
interface Props {
  id: string;
  label: string;
  type?: 'text' | 'email' | 'tel' | 'textarea';
  placeholder?: string;
  required?: boolean;
  error?: string;
  name?: string;
}

const { id, label, type = 'text', placeholder, required = false, error, name } = Astro.props;
---

<div class="form-group">
  <label for={id} class="label">
    {label} {required && <span class="required">*</span>}
  </label>
  
  {type === 'textarea' ? (
    <textarea
      id={id}
      name={name || id}
      placeholder={placeholder}
      required={required}
      class:list={['input', 'textarea', { 'input--error': error }]}
      rows="4"
    ></textarea>
  ) : (
    <input
      type={type}
      id={id}
      name={name || id}
      placeholder={placeholder}
      required={required}
      class:list={['input', { 'input--error': error }]}
    />
  )}

  {error && <span class="error-message">{error}</span>}
</div>

<style>
  .form-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    width: 100%;
  }

  .label {
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--text);
  }

  .required {
    color: var(--danger);
  }

  .input {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    background-color: var(--surface);
    color: var(--text);
    font-family: var(--font-body);
    font-size: var(--text-base);
    transition: all 0.2s ease;
  }

  .textarea {
    resize: vertical;
    min-height: 100px;
  }

  .input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px var(--focus-ring);
  }

  .input--error {
    border-color: var(--danger);
  }

  .input--error:focus {
    box-shadow: 0 0 0 4px rgba(225, 29, 72, 0.2);
  }

  .error-message {
    font-size: var(--text-xs);
    color: var(--danger);
  }
</style>
